<!-- index.html template -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Item Data</title>
    <script type="text/javascript" src="{{ url_for('static', filename='script.js') }}"></script>
    <script type="text/javascript">
      var listData = JSON.parse('{{ list_data | tojson | safe }}');
    </script>
    <link rel="stylesheet" type="text/css" href="../static/css_reset.css" /> 
    <link rel="stylesheet" type="text/css" href="../static/style.css" />
  </head>
  <body>
    <h1>Todo Lists</h1>

        <!-- Button to trigger the add item modal -->
        <div class="add-item-button">  
          <button id="openAddTaskModalBtn" class="openAddTaskModalBtn btn">Add Item</button> <!--rename openAddItemModalBtn and rename class also-->
        </div>
        <!-- Add New Item Modal -->
        <div id="addTaskModal" class="modal"> <!--rename addItemModal-->
          <div class="modal-content">
            <a href="#close" class="close">&times;</a>
            <h2 class="modal-heading">Add New Item</h2>
            <form action="/add_item" method="post"> 
              <label for="itemname">Item Name:</label>
              <input type="text" id="itemname" name="itemname" required /><br />
              <label for="listid">Select List:</label>
              <select id="listid" name="listid" required>
                {% for list_item in list_data %}
                <option value="{{ list_item.listid }}">
                  {{ list_item.listname }}
                </option>
                {% endfor %}</select
              ><br />
              <input type="submit" class="btn" value="Save Item" />
              <button type="button" class="cancel-btn btn">Cancel</button>
            </form>
          </div>
        </div>

    <!-- Button to trigger add new list modal -->
    <div class="add-list-button">
      <button id="openNewListModalBtn" class="openAddTaskModalBtn btn">Add List</button> <!--rename openAddItemModalBtn-->
    </div>
    <!-- Add New List Modal -->
    <div id="newListModal" class="modal">
      <div class="modal-content">
        <a href="#close" class="close">&times;</a>
        <h2 class="modal-heading">Add New List</h2>
        <form action="/add_list" method="post">
          <label for="listname">List Name:</label>
          <input type="text" id="listname" name="listname" required /><br />
          <input type="submit" class="btn" value="Save List" />
          <button type="button" class="cancel-btn btn">Cancel</button>
        </form>
      </div>
    </div>
<div class="lists-wrapper">
  {% for item in list_data %}
  <div class="list-container">
    <ul class="items-collection-header">
        <li class="list-header">

            <div class="list-id">  {{ item.listid }} </div>
            <div class="list-name"> {{ item.listname }} </div>
            <div class="list-buttons">
              <div class="list-button">
              <button class="openEditListModalBtn btn" 
                data-listid="{{ item.listid }}"
                data-listname="{{ item.listname }}">Edit List</button>
              </div>
              <div class="list-button">
              <form action="/delete_list" method="post">
                <input type="hidden" name="listid" value="{{ item.listid }}">
                <button type="submit" class="list-delete-btn btn">Delete List</button>
              </form>
            
            </div>
          </div>
        </li>
      </ul>
        <ul class="items-collection">
          {% for list_item in item.items_collection %}
          <li class="item">
              <div class="item-id">{{ list_item.itemid }}</div>
              <div class="item-name">{{ list_item.itemname }}</div>
              <div class="item-buttons">
                <div class="item-button">
                  <!--rename openEditItemModalBtn-->
                <button class="openEditModalBtn btn" 
                  data-itemid="{{ list_item.itemid }}"
                  data-itemname="{{ list_item.itemname }}"
                  data-listid="{{ item.listid }}"
                  data-listname="{{ item.listname }}">Edit Item</button>
                  </div>
                  <div class="item-button">
                <form action="/delete_item" method="post">
                  <input type="hidden" name="itemid" value="{{ list_item.itemid }}">
                  <button type="submit" class="task-delete-btn btn">Delete Item</button> <!--rename item-delete-btn-->
                </form>
              </div>
              </div>
          </li>
          {% endfor %}
        </ul>
      </div>  
      {% endfor %} 
      </div>
</html>
